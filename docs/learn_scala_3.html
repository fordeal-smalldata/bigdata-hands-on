<!DOCTYPE html>
<html class="no-js" lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scalaå…¥é—¨(ä¸‰)</title>
    <link rel="stylesheet" href="theme/css/foundation.min.css">
    <link rel="stylesheet" href="theme/css/app.css">
    
     <link rel="stylesheet" href="theme/highlight.js/styles/github-gist.css">  <link rel="stylesheet" href="theme/css/foundation-icons.custom.css"> 
    
     <link rel="prev" href="learn_scala_2.html"  title="Scalaå…¥é—¨(äºŒ)"  />  <link rel="start" href="index.html"  title="Scala è¯­è¨€å…¥é—¨:ææ–™å‡†å¤‡"  />  <link rel="toc" href="site-contents.html"  title="Table of Contents"  /> 
  </head>
  <body>
    <div class="expanded row">
      <div class="small-12 medium-12 large-12 columns align-self-top">
        <div class="row">
          
          <header class="large-12 columns align-self-top a_header">
            <div class="row">
              <div class="large-12 columns a_limited top-bar">
                <div class="top-bar-left">
                  <p>Fordealæ•°æ®å¹³å° æŠ€æœ¯è®²ä¹‰</p>

                </div>
                <div class="top-bar-right align-right row">
                  
                  
                    <form action="site-search.html" method="get" class="align-right a_search">
                      <input name="q" type="search"  placeholder="Search
" >
                      <button><img alt="&#1F50D;" src="theme/images/search.svg" /></button>
                    </form>
                  
                </div>
              </div>
            </div>
          </header>
          
          <div class="small-12 medium-12 large-12 columns align-self-top a_limited a_main">
            <div class="row">
              
              <main class="columns large-order-2 sections" id="_sections">
                 
  <ul class="menu align-right simple a_navbar a_navbar_top">
    
      
        <li><a href="learn_scala_2.html"  title="Scalaå…¥é—¨(äºŒ)" ><span class="a_foundation_icon">ï„Š</span>  Previous</a></li>
      
    
      
        <li><span><span class="a_foundation_icon">ï„‹</span>  Next</span></li>
      
    
      
        <li><a href="site-contents.html"  title="Table of Contents" ><span class="a_foundation_icon">ï…¨</span>  Contents</a></li>
      
    
  </ul>
 
                
                <h1 id="scalaå…¥é—¨ä¸‰" class="a_section" data-magellan-target="scalaå…¥é—¨ä¸‰">Scalaå…¥é—¨(ä¸‰)<a class="a_hlink" href="#scalaå…¥é—¨ä¸‰"></a></h1>
<h2 id="case-classå’Œæ¨¡å¼åŒ¹é…" class="a_section" data-magellan-target="case-classå’Œæ¨¡å¼åŒ¹é…">case classå’Œæ¨¡å¼åŒ¹é…<a class="a_hlink" href="#case-classå’Œæ¨¡å¼åŒ¹é…"></a></h2>
<p>å’±ä»¬çš„è®²ä¹‰å¼€å¤´å·²ç»æåˆ°äº†,è¿™ä¸ªç³»åˆ—è®²ä¹‰æ˜¯æ•™æ‚¨æ€ä¹ˆç”¨Scalaå¤„ç†æ•°æ®çš„.é‚£ä¹ˆæˆ‘ä»¬å°±åœ¨è¿™é‡Œç€é‡ä»‹ç»Scalaæä¾›çš„ä¸€ä¸ªèƒ½ä¸ºæ‚¨å¤„ç†æ•°æ®æä¾›ä¸€ä¸ªå¾ˆå¤§ä¾¿åˆ©æ€§çš„ç‰¹æ€§,å«åš<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>.</p>
<p><code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>åœ¨é»˜è®¤çš„<code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span></span></code>åŸºç¡€ä¸Šæä¾›äº†è‹¥å¹²ä¾¿åˆ©ç‰¹æ€§(Scalaé»˜è®¤çš„<code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span></span></code>åŸºæœ¬ä¸Šå°±æ˜¯Javaçš„<code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span></span></code>),æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä¸€äº›é»˜è®¤<code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span></span></code>ä»£ç çš„è¿è¡Œç»“æœ</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>(<span class="hljs-params">val x: <span class="hljs-type">Int</span>, val y: <span class="hljs-type">Int</span></span>)</span>

  <span class="hljs-keyword">val</span> point1 = <span class="hljs-keyword">new</span> <span class="hljs-type">Point</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
  <span class="hljs-keyword">val</span> point2 = <span class="hljs-keyword">new</span> <span class="hljs-type">Point</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
  println(point1)
  <span class="hljs-comment">//è¾“å‡º Point@1e643faf</span>
  println(point1 == point2)
  <span class="hljs-comment">//è¾“å‡º false</span>

  <span class="hljs-keyword">val</span> point1x = point1.x
  <span class="hljs-keyword">val</span> point1y = point1.y
  println(<span class="hljs-string">"point1x = "</span> + point1x) <span class="hljs-comment">//point1x = 1</span>
  println(<span class="hljs-string">"point1y = "</span> + point1y) <span class="hljs-comment">//point1y = 1</span>
</code></pre>
</div></div>
<p>ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ä¸¤ä¸ªç‚¹,ä¸€ä¸ªæ˜¯<code class="hljs language-scala">println(point1)</code>è¾“å‡ºäº†<code class="hljs language-scala"><span class="hljs-type">Point</span>@<span class="hljs-number">1e643</span>faf</code>,è¿™æ˜¯é»˜è®¤è°ƒç”¨äº†Javaé‡Œçš„<code class="hljs language-scala"><span class="hljs-type">Object</span>.toString</code>çš„ç»“æœ,ä¸€ä¸ªScalaç±»å°±æ˜¯ä¸€ä¸ªJavaç±»,æ‰€ä»¥Scalaç±»ä¹Ÿéƒ½æ˜¯Javaé‡ŒObjectç±»çš„å­ç±».é»˜è®¤çš„<code class="hljs language-scala"><span class="hljs-type">Object</span>.toString</code>åœ¨æˆ‘ä»¬å®é™…å·¥ä½œä¸­ä¸€èˆ¬èµ·ä¸åˆ°ä»€ä¹ˆå¸®åŠ©,æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šé‡æ–°ä¸ºæˆ‘ä»¬çš„ç±»å®šä¹‰ä¸€ä¸ª<code class="hljs language-scala">toString</code>æ¥è¦†ç›–<code class="hljs language-scala"><span class="hljs-type">Object</span>.toString</code>æ¥æ–¹ä¾¿è°ƒè¯•ç›‘æ§ä»€ä¹ˆçš„.</p>
<p>å¦å¤–,<code class="hljs language-scala">println(point1 == point2)</code>è¾“å‡ºäº†<code class="hljs language-scala"><span class="hljs-literal">false</span></code>,å› ä¸º<code class="hljs language-scala">==</code>è°ƒç”¨äº†<code class="hljs language-scala">equals</code>æ–¹æ³•,æŒ‰ç…§é»˜è®¤çš„<code class="hljs language-scala"><span class="hljs-type">Object</span>.equals</code>å®ç°,è¿™ä¸ªæ–¹æ³•æ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€,å¦‚æœåœ°å€ä¸ä¸€æ ·å°±è¿”å›<code class="hljs language-scala"><span class="hljs-literal">false</span></code>.å®é™…ç»å¤§éƒ¨åˆ†æ•°æ®å¤„ç†åœºæ™¯ä¸‹,å‡ ä¹æ²¡æœ‰äººå…³å¿ƒä¸¤ä¸ªå¯¹è±¡åœ°å€æ˜¯å¦ä¸€æ ·,æ‰€ä»¥é»˜è®¤çš„<code class="hljs language-scala">equals</code>æ–¹æ³•ä¹Ÿæ²¡ä»€ä¹ˆç”¨å¤„.</p>
<p>æ¯æ¬¡å®šä¹‰ä¸€ä¸ªæ–°ç±»,éƒ½è¦å®šä¹‰å¤§é‡çš„é‡è½½,æ˜¯ä¸€ä»¶æŒºéº»çƒ¦çš„äº‹æƒ…,æ‰€ä»¥é’ˆå¯¹ç¾¤ä¼—çš„éœ€è¦,<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>å‡ºç°äº†,æˆ‘ä»¬æ¥çœ‹ä¸‹<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>çš„è¡¨ç°.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>(<span class="hljs-params">x: <span class="hljs-type">Int</span>, y: <span class="hljs-type">Int</span></span>)</span>

  <span class="hljs-keyword">val</span> point1 = <span class="hljs-type">Point</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
  <span class="hljs-keyword">val</span> point2 = <span class="hljs-type">Point</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
  <span class="hljs-keyword">val</span> point3 = point2.copy(y = <span class="hljs-number">10</span>)
  println(point3)
  <span class="hljs-comment">//è¾“å‡º Point(1,10)</span>
  println(point1 == point2)
  <span class="hljs-comment">//è¾“å‡º true</span>

  <span class="hljs-keyword">val</span> <span class="hljs-type">Point</span>(point1x, point1y) = point1
  println(<span class="hljs-string">"point1x = "</span> + point1x)
  <span class="hljs-comment">// point1x = 1</span>
  println(<span class="hljs-string">"point1y = "</span> + point1y)
  <span class="hljs-comment">// point1y = 1</span>
</code></pre>
</div></div>
<p>å®šä¹‰<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>çš„æ—¶å€™,æ‚¨ä¸ç”¨åœ¨<code class="hljs language-scala">x</code>å’Œ<code class="hljs language-scala">y</code>é¢å‰å¢åŠ <code class="hljs language-scala"><span class="hljs-keyword">val</span></code>(å› ä¸º<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code> é»˜è®¤éƒ½ç”¨<code class="hljs language-scala"><span class="hljs-keyword">val</span></code>å®šä¹‰æˆå‘˜),å¹¶ä¸”ä¼šè‡ªåŠ¨ç»™æ‚¨ç”Ÿæˆä¸€ä¸ªå®ç”¨çš„<code class="hljs language-scala">toString</code>å’Œä¸€ä¸ªå®ç”¨çš„<code class="hljs language-scala">equals</code>æ–¹æ³•,é™¤æ­¤ä¹‹å¤–,è¿˜æä¾›äº†ä¾¿åˆ©åœ°ç”¨æ—§<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>å±€éƒ¨é‡æ–°èµ‹å€¼,ç”Ÿæˆæ–°<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>çš„æ–¹æ³•(è§<code class="hljs language-scala">point3</code>),è¿˜æä¾›äº†æ¨¡å¼åŒ¹é…åŠŸèƒ½,è§(<code class="hljs language-scala">point1x</code>å’Œ<code class="hljs language-scala">point1y</code>),æ¨¡å¼åŒ¹é…åŠŸèƒ½æˆ‘ä»¬æ¥ç€ç»†è¯´.</p>
<h3 id="case-class-åŒ¹é…" class="a_section" data-magellan-target="case-class-åŒ¹é…"><code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code> åŒ¹é…<a class="a_hlink" href="#case-class-åŒ¹é…"></a></h3>
<p><code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>å’Œæ¨¡å¼åŒ¹é…ä¸€èµ·å·¥ä½œèƒ½å¤§å¹…æé«˜ä»£ç çš„è¡¨è¾¾èƒ½åŠ›,å™è¿°æ¨¡å¼åŒ¹é…çš„ä½œç”¨çš„æ—¶å€™,ä¸ºäº†èƒ½è®©åœºæ™¯æ›´è´´è¿‘å®é™…,æˆ‘ä»¬æ¥å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“<a href="https://github.com/json4s/json4s">json4s</a>.æˆ‘ä»¬çš„ä¹ é¢˜é¡¹ç›®é‡Œå·²ç»åŠ å…¥äº†json4sä¾èµ–,ç›´æ¥ç”¨å°±å¯ä»¥äº†,ä½¿ç”¨æ–¹æ³•æ˜¯åœ¨ä»£ç ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">    <span class="hljs-keyword">import</span> org.json4s._
    <span class="hljs-keyword">import</span> org.json4s.jackson.<span class="hljs-type">JsonMethods</span>._
    <span class="hljs-keyword">implicit</span> <span class="hljs-keyword">val</span> formats = <span class="hljs-type">DefaultFormats</span>
</code></pre>
</div></div>
<p>åœ¨Ammoniteä¸­,å¯ä»¥è¿™æ ·åŠ å…¥json4sä¾èµ–</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">âœ  bigdata-hands-on git:(master) âœ— amm
<span class="hljs-type">Loading</span>...
<span class="hljs-type">Welcome</span> to the <span class="hljs-type">Ammonite</span> <span class="hljs-type">Repl</span> <span class="hljs-number">1.6</span><span class="hljs-number">.8</span>
(<span class="hljs-type">Scala</span> <span class="hljs-number">2.13</span><span class="hljs-number">.0</span> <span class="hljs-type">Java</span> <span class="hljs-number">1.8</span><span class="hljs-number">.0</span>_181)
<span class="hljs-type">If</span> you like <span class="hljs-type">Ammonite</span>, please support our development at www.patreon.com/lihaoyi
renkai-bigdata-hands-on@     <span class="hljs-keyword">import</span> $ivy.`org.json4s::json4s-jackson:<span class="hljs-number">3.6</span><span class="hljs-number">.7</span>`
<span class="hljs-keyword">import</span> $ivy.$

renkai-bigdata-hands-on@     <span class="hljs-keyword">import</span> org.json4s._
<span class="hljs-keyword">import</span> org.json4s._

renkai-bigdata-hands-on@     <span class="hljs-keyword">import</span> org.json4s.jackson.<span class="hljs-type">JsonMethods</span>._
<span class="hljs-keyword">import</span> org.json4s.jackson.<span class="hljs-type">JsonMethods</span>._

renkai-bigdata-hands-on@     <span class="hljs-keyword">implicit</span> <span class="hljs-keyword">val</span> formats = <span class="hljs-type">DefaultFormats</span>
formats: <span class="hljs-type">DefaultFormats</span>.<span class="hljs-keyword">type</span> = org.json4s.<span class="hljs-type">DefaultFormats</span>$<span class="hljs-meta">@cbf</span>1997
</code></pre>
</div></div>
<p>json4sç»™å‡ºäº†ä»¥ä¸‹<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>å®šä¹‰,è¿™äº›å®šä¹‰å¯ä»¥è¡¨è¾¾ä¸€ä¸ªå®Œæ•´çš„jsonç»“æ„</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-comment">//json4så·²ç»å®šä¹‰å¥½äº†,ä¸ç”¨è‡ªå·±å®šä¹‰,å¯¼å…¥å°±è¡Œå•¦</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">JNothing</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span> <span class="hljs-title">//</span> '<span class="hljs-title">zero</span>' <span class="hljs-title">for</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">JNull</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JString</span>(<span class="hljs-params">s: <span class="hljs-type">String</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JDouble</span>(<span class="hljs-params">num: <span class="hljs-type">Double</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JDecimal</span>(<span class="hljs-params">num: <span class="hljs-type">BigDecimal</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JInt</span>(<span class="hljs-params">num: <span class="hljs-type">BigInt</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JLong</span>(<span class="hljs-params">num: <span class="hljs-type">Long</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JBool</span>(<span class="hljs-params">value: <span class="hljs-type">Boolean</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JObject</span>(<span class="hljs-params">obj: <span class="hljs-type">List</span>[<span class="hljs-type">JField</span>]</span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JArray</span>(<span class="hljs-params">arr: <span class="hljs-type">List</span>[<span class="hljs-type">JValue</span>]</span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">JValue</span></span>

<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">JField</span> </span>= (<span class="hljs-type">String</span>, <span class="hljs-type">JValue</span>)
</code></pre>
</div></div>
<p>å‡è®¾,ç°åœ¨ä¸€é¡¹å·¥ä½œç›®æ ‡æ¥äº†,æ‚¨éœ€è¦å¤„ç†ä¸€äº›åˆ«äººäº§ç”Ÿçš„json,å–å‡ºå…¶ä¸­çš„ä¸€ä¸ªå­—æ®µçš„æ•´å‹å€¼,ç„¶è€Œè¿™äº›jsonæœ‰äº›å°æ¯›ç—…,æœ‰çš„ç¼ºå°‘è¿™ä¸ªå­—æ®µ,æœ‰çš„è¿™ä¸ªå­—æ®µä¸º<code class="hljs language-scala"><span class="hljs-literal">null</span></code>,æœ‰çš„è¿™ä¸ªå­—æ®µæ˜¯å­—ç¬¦ä¸²å½¢å¼(è™½ç„¶å­—ç¬¦ä¸²é‡Œéƒ½æ˜¯æ•´æ•°),æŸäº›ç¼–ç¨‹è¯­è¨€(æ¯”å¦‚è¯´PHP)åœ¨ä¸šåŠ¡å¤æ‚ä¹‹åå¾ˆå®¹æ˜“äº§ç”Ÿè¿™æ ·æ ¼å¼æ··ä¹±çš„æ•°æ®,æˆ‘ä»¬éœ€è¦æŠŠå„ç§æƒ…å†µéƒ½åº”å¯¹äº†,æ‹¿ç€å¹²å‡€çš„æ•°æ®è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†.</p>
<p>ä¸€å¼€å§‹,æ‚¨æ¯”è¾ƒå‚»æ¯”è¾ƒå¤©çœŸ,ä»¥ä¸ºæ•°æ®æ ¼å¼éƒ½æ˜¯å¥½çš„,å†™å‡ºäº†ä¸€ç‰ˆè¿™æ ·çš„ä»£ç ,åªè€ƒè™‘äº†ç¡®å®æœ‰ç›¸åº”å­—æ®µ,å¹¶ä¸”æ ¼å¼ä¹Ÿæ­£ç¡®çš„æƒ…å†µ</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> messyData = <span class="hljs-type">Seq</span>(
    <span class="hljs-string">"{\"should_int\": 1024}"</span>,
    <span class="hljs-string">"{\"should_int\": \"1025\"}"</span>,
    <span class="hljs-string">"{\"should_int\": null}"</span>,
    <span class="hljs-string">"{}"</span>
  )
  
  <span class="hljs-keyword">import</span> org.json4s._
  <span class="hljs-keyword">import</span> org.json4s.jackson.<span class="hljs-type">JsonMethods</span>._
  <span class="hljs-keyword">implicit</span> <span class="hljs-keyword">val</span> formats = <span class="hljs-type">DefaultFormats</span>

  <span class="hljs-keyword">val</span> cleanData = messyData.map {
    jsStr =&gt;
      <span class="hljs-keyword">val</span> jsObj = parse(jsStr)
      (jsObj \ <span class="hljs-string">"should_int"</span>) <span class="hljs-keyword">match</span> {
        <span class="hljs-keyword">case</span> <span class="hljs-type">JInt</span>(num) =&gt; num
      }
  }
</code></pre>
</div></div>
<p>è€Œå½“æˆ‘ä»¬å°è¯•ç¼–è¯‘è¿™æ®µä»£ç çš„æ—¶å€™,å°±ä¼šæ”¶åˆ°è¿™æ ·çš„è­¦å‘Š</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">match</span> may not be exhaustive.
<span class="hljs-type">It</span> would fail on the following inputs: <span class="hljs-type">JArray</span>(_), <span class="hljs-type">JBool</span>(_), <span class="hljs-type">JDecimal</span>(_), <span class="hljs-type">JDouble</span>(_), <span class="hljs-type">JLong</span>(_), <span class="hljs-type">JNothing</span>, <span class="hljs-type">JNull</span>, <span class="hljs-type">JObject</span>(_), <span class="hljs-type">JSet</span>(_), <span class="hljs-type">JString</span>(_)
      (jsObj \ <span class="hljs-string">"should_int"</span>) <span class="hljs-keyword">match</span> {
             ^
one warning found
</code></pre>
</div></div>
<p>å‘Šè¯‰æ‚¨ä¸è¦å¤ªå‚»å¤ªå¤©çœŸ,æ‚¨åœ¨ä»£ç é‡Œæ²¡æœ‰è€ƒè™‘çš„å¼‚å¸¸æƒ…å†µå¯èƒ½è¿˜æœ‰å¾ˆå¤š.è®©æˆ‘ä»¬ä»”ç»†è€ƒè™‘ä¸‹è¿™ä¸ªwarning,æ€è€ƒè‡ªå·±æœ‰ä»€ä¹ˆåšçš„ä¸è¶³çš„åœ°æ–¹,å‘ç°åŸæ¥æœ‰å¥½å¤šæƒ…å†µæ²¡è€ƒè™‘,äºæ˜¯åŠ ä¸Šäº†é’ˆå¯¹æ‰€æœ‰æƒ…å†µçš„åº”å¯¹æ–¹æ¡ˆ(æ¯•ç«Ÿæ•°æ®å¾€å¾€æ˜¯åˆ«äººç”Ÿæˆçš„,ä»€ä¹ˆä¸é è°±çš„äº‹æƒ…éƒ½å¯èƒ½å‘ç”Ÿ)</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> cleanData = messyData.map {
    jsStr =&gt;
      <span class="hljs-keyword">val</span> jsObj = parse(jsStr)
      (jsObj \ <span class="hljs-string">"should_int"</span>) <span class="hljs-keyword">match</span> {
        <span class="hljs-keyword">case</span> <span class="hljs-type">JInt</span>(num) =&gt; num.toInt
        <span class="hljs-keyword">case</span> <span class="hljs-type">JArray</span>(x) =&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">case</span> <span class="hljs-type">JBool</span>(x) =&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">case</span> <span class="hljs-type">JDecimal</span>(x) =&gt; x.toInt
        <span class="hljs-keyword">case</span> <span class="hljs-type">JDouble</span>(x) =&gt; x.toInt
        <span class="hljs-keyword">case</span> <span class="hljs-type">JLong</span>(x) =&gt; x.toInt
        <span class="hljs-keyword">case</span> <span class="hljs-type">JNothing</span> =&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">case</span> <span class="hljs-type">JNull</span> =&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">case</span> <span class="hljs-type">JObject</span>(x) =&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">case</span> <span class="hljs-type">JSet</span>(x) =&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">case</span> <span class="hljs-type">JString</span>(x) =&gt; x.toInt
      }
  }
  println(cleanData)
  <span class="hljs-comment">//è¾“å‡º List(1024, 1025, 0, 0)</span>
</code></pre>
</div></div>
<p>ç°åœ¨æ‰€æœ‰æƒ…å†µéƒ½èƒ½åº”å¯¹äº†,ä¸è¿‡ä»£ç ç¨å¾®å†—ä½™äº†äº›,æ‚¨å’Œç”Ÿäº§æ•°æ®çš„å°ä¼™ä¼´æ²Ÿé€šäº†ä¸€ä¸‹,å‘ç°é™¤äº†<code class="hljs language-scala"><span class="hljs-type">JInt</span></code>,<code class="hljs language-scala"><span class="hljs-type">JDouble</span></code>,<code class="hljs language-scala"><span class="hljs-type">JString</span></code>,<code class="hljs language-scala"><span class="hljs-type">JNull</span></code>,<code class="hljs language-scala"><span class="hljs-type">JNothing</span></code>è¿™äº›æƒ…å†µæ˜¯å®ƒæ— å¿ƒä¹‹å¤±äº§ç”Ÿçš„,å¹¶ä¸”æ•°æ®è¿˜æœ‰çš„æ•‘ä¹‹å¤–,å…¶ä»–æ•°æ®ç±»å‹éƒ½æ˜¯ä¸åº”è¯¥äº§ç”Ÿ,å¹¶ä¸”å‘ç°äº†é©¬ä¸Šè¦ä¸ŠæŠ¥å¼‚å¸¸çš„,ä»£ç å°±å¯ä»¥æ”¹æˆè¿™æ ·.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> cleanData = messyData.map {
    jsStr =&gt;
      <span class="hljs-keyword">val</span> jsObj = parse(jsStr)
      (jsObj \ <span class="hljs-string">"should_int"</span>) <span class="hljs-keyword">match</span> {
        <span class="hljs-keyword">case</span> <span class="hljs-type">JInt</span>(num) =&gt; num.toInt
        <span class="hljs-keyword">case</span> <span class="hljs-type">JString</span>(x) <span class="hljs-keyword">if</span> x.forall(_.isDigit) =&gt; x.toInt
        <span class="hljs-keyword">case</span> <span class="hljs-type">JDouble</span>(x) =&gt; x.toInt
        <span class="hljs-keyword">case</span> <span class="hljs-type">JNull</span> =&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">case</span> <span class="hljs-type">JNothing</span> =&gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">case</span> x =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">Exception</span>(<span class="hljs-string">"ä¸åº”è¯¥è¿è¡Œåˆ°è¿™é‡Œ"</span> + x)
      }
  }
  println(cleanData)
  <span class="hljs-comment">//è¾“å‡º List(1024, 1025, 0, 0)</span>
</code></pre>
</div></div>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸ªåœºæ™¯ä¸‹<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>åŠ æ¨¡å¼åŒ¹é…ä¸ºæ‚¨åšäº†ä»€ä¹ˆ.</p>
<p>é¦–å…ˆå®ƒé€šè¿‡ç¼–è¯‘å™¨æç¤ºå¸®åŠ©æ‚¨æ‰¾å‡ºäº†è€ƒè™‘ç–æ¼çš„åœ°æ–¹,ç„¶åé’ˆå¯¹åŒ¹é…åˆ°çš„å†…å®¹,æ‚¨å¯ä»¥åŒæ—¶ä¾¿æ·çš„å–å‡º<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>ä¸­éœ€è¦çš„æ•°æ®.æœ€å,æ‚¨å¯ä»¥é€šè¿‡ä¸€ä¸ªé€šé…çš„æƒ…å†µç»Ÿä¸€å¤„ç†æ‚¨ä¸å¹¶å…³å¿ƒçš„å…¶å®ƒå„ç§å¯èƒ½æ€§.</p>
<h3 id="å˜é•¿å‚æ•°åŒ¹é…" class="a_section" data-magellan-target="å˜é•¿å‚æ•°åŒ¹é…">å˜é•¿å‚æ•°åŒ¹é…<a class="a_hlink" href="#å˜é•¿å‚æ•°åŒ¹é…"></a></h3>
<p>æ¨¡å¼åŒ¹é…é™¤äº†åŒ¹é…<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>å’ŒåŸºæœ¬æ•°æ®ç±»å‹å¤–,è¿˜èƒ½åŒ¹é…æ ‡å‡†åº“é‡Œçš„ä¸€äº›æ•°æ®ç»“æ„,ä¾‹å¦‚<code class="hljs language-scala"><span class="hljs-type">Seq</span></code>,æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ¨¡å¼åŒ¹é…ä¾¿åˆ©åœ°ä¸º<code class="hljs language-scala"><span class="hljs-type">Seq</span></code>ä¸­æˆ‘ä»¬éœ€è¦çš„å†…å®¹å‘½å</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> seq = <span class="hljs-type">Seq</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
  <span class="hljs-keyword">val</span> <span class="hljs-type">Seq</span>(a, b, c, d, e) = seq
  println(a,b,c,d,e) <span class="hljs-comment">//è¾“å‡º (1,2,3,4,5)</span>
</code></pre>
</div></div>
<p>å½“ç„¶,è¿™ç§æƒ…å†µéœ€è¦ä¸¤è¾¹å…ƒç´ ä¸ªæ•°å®Œå…¨ç¬¦åˆæ‰è¡Œ,å¦‚æœå…ƒç´ æœ‰å¤šæˆ–è€…åˆå°‘å°±ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> seq = <span class="hljs-type">Seq</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
  <span class="hljs-keyword">val</span> <span class="hljs-type">Seq</span>(a, b, c, d) = seq
  <span class="hljs-comment">// Exception in thread "main" scala.MatchError: List(1, 2, 3, 4, 5) (of class scala.collection.immutable.$colon$colon)</span>
  println(a,b,c,d)
</code></pre>
</div></div>
<p>å¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³è·å¾—å¤´éƒ¨çš„å‡ ä¸ªå…ƒç´ ,è€Œå¿½ç•¥åé¢çš„å…ƒç´ æ€ä¹ˆåŠ?è¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨ä¸€ä¸ª<code class="hljs language-scala">_*</code>è¡¨ç¤ºæ¥æ”¶åé¢çš„å…ƒç´ </p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> seq = <span class="hljs-type">Seq</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)
  <span class="hljs-keyword">val</span> <span class="hljs-type">Seq</span>(a, b, c, d, _*) = seq
  println(a, b, c, d) <span class="hljs-comment">// (1,2,3,4)</span>
</code></pre>
</div></div>
<p>å¦‚æœåé¢çš„å…ƒç´ æˆ‘ä»¬è¿˜æ˜¯æƒ³è¦,è€Œä¸æ˜¯ç®€å•åœ°ä¸¢å¼ƒ,è¯¥æ€ä¹ˆåŠå‘¢,æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ª<code class="hljs language-scala">x @ _*</code>,è¡¨ç¤ºç”¨<code class="hljs language-scala">_*</code>æ¥æ”¶åé¢çš„å…ƒç´ ,<code class="hljs language-scala">x @</code>è¡¨ç¤ºå°†ä»–ä»¬å‘½åä¸º<code class="hljs language-scala">x</code></p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> seq = <span class="hljs-type">Seq</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)
  <span class="hljs-keyword">val</span> <span class="hljs-type">Seq</span>(a, b, c, d, x @ _*) = seq
  println(a, b, c, d) <span class="hljs-comment">// (1,2,3,4)</span>
  println(x) <span class="hljs-comment">// List(5, 6)</span>
</code></pre>
</div></div>
<h3 id="æ­£åˆ™åŒ¹é…" class="a_section" data-magellan-target="æ­£åˆ™åŒ¹é…">æ­£åˆ™åŒ¹é…<a class="a_hlink" href="#æ­£åˆ™åŒ¹é…"></a></h3>
<p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä»æ–‡æœ¬ä¸­æå–æ•°æ®å¸¸ç”¨çš„å·¥å…·,å…³äºæ­£åˆ™è¡¨è¾¾å¼çš„å­¦ä¹ ,ç½‘ä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„æ•™ç¨‹å’Œæ–‡æ¡£å¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥é˜….</p>
<p>è¿™é‡Œæ¨èä¸€ä»½æ•™ç¨‹http://regextutorials.com/](http://regextutorials.com/)</p>
<p>å’Œä¸€ä»½æ–‡æ¡£<a href="https://docs.python.org/3/library/re.html">https://docs.python.org/3/library/re.html</a> (æ²¡é”™,å°±æ˜¯Pythonè¯­è¨€çš„å®˜æ–¹æ–‡æ¡£!ä½ è¦é—®æˆ‘Pythonæœ‰å“ªç‚¹å¥½,æˆ‘æƒ³æ¥æƒ³å»ä¹Ÿå°±è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ–‡æ¡£ç¡®å®ä¸é”™)</p>
<p>å¥½äº†,ç°åœ¨å‡è®¾æ‚¨å·²ç»æŒæ¡äº†åŸºæœ¬çš„æ­£åˆ™è¡¨è¾¾å¼,æƒ³åˆ©ç”¨Scalaæ¨¡å¼åŒ¹é…çš„ç‰¹æ€§ä¾¿åˆ©åœ°è¿›è¡Œå·¥ä½œ,ä¸€é¡¹å·¥ä½œå†…å®¹æ˜¯æå–å‡ºä¸€ä¸ªCSSæ–‡ä»¶ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹,ç„¶åä»£ç å°±å¯ä»¥è¿™ä¹ˆå†™</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  val keyValPattern = "([0-9a-zA-Z- ]+): ([0-9a-zA-Z-#()/. ]+)".r

  val input: String =
    """background-color: #A03300;
      |background-image: url(img/header100.png);
      |background-position: top center;
      |background-repeat: repeat-x;
      |background-size: 2160px 108px;
      |margin: 0;
      |height: 108px;
      |width: 100%;""".stripMargin

  val kvMap: Map[String, String] =
    keyValPattern.findAllIn(input) // è·å–æ‰€æœ‰ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²
      .map {
        case keyValPattern(x, y) =&gt; (x, y) //é€šè¿‡æ¨¡å¼åŒ¹é…è·å–é”®å€¼å¯¹
      }
      .toMap //æŠŠSeq[(String,String)]è½¬æ¢ä¸ºMap[String,String]

  println("CSSä¸­çš„å†…å®¹æœ‰: ")
  kvMap.foreach {
    case (k, v) =&gt; //ç”¨æ¨¡å¼åŒ¹é…è·å–
      println(s"'$k' '$v'")
  }
//CSSä¸­çš„å†…å®¹æœ‰: 
//'background-image' 'url(img/header100.png)'
//'margin' '0'
//'background-repeat' 'repeat-x'
//'height' '108px'
//'background-color' '#A03300'
//'background-size' '2160px 108px'
//'width' '100'
//'background-position' 'top center'
</code></pre>
</div></div>
<p>æ›´å¤šå…·ä½“ç”¨ä¾‹å¯ä»¥çœ‹Scalaçš„<a href="https://www.scala-lang.org/api/2.12.1/scala/util/matching/Regex.html">å®˜æ–¹æ–‡æ¡£</a></p>
<h2 id="å¼‚å¸¸å¤„ç†" class="a_section" data-magellan-target="å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†<a class="a_hlink" href="#å¼‚å¸¸å¤„ç†"></a></h2>
<p>Scalaçš„å¼‚å¸¸å¤„ç†å’ŒJavaåŸºæœ¬ä¸€æ ·,ç”¨<code class="hljs language-scala"><span class="hljs-keyword">try</span> {} <span class="hljs-keyword">catch</span> {}</code>å—å¤„ç†å°±è¡Œäº†,åŒºåˆ«åªæ˜¯Scalaç”¨æ¨¡å¼åŒ¹é…æ¥æ•è·å…·ä½“çš„é”™è¯¯ç±»å‹,éœ€è¦æ³¨æ„çš„æ˜¯,<code class="hljs language-scala"><span class="hljs-type">Exception</span></code>çš„å­ç±»åŸºæœ¬ä¸Šä¸ä¼šæ˜¯<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>,è€Œæ˜¯æ™®é€š<code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span></span></code>,æ‰€ä»¥æ¨¡å¼åŒ¹é…åœ¨è¿™é‡Œåªèƒ½åšåˆ°è¯†åˆ«ä¸åŒçš„<code class="hljs language-scala"><span class="hljs-type">Exception</span></code>ç±»,æ— æ³•è‡ªåŠ¨æå–å‡º<code class="hljs language-scala"><span class="hljs-type">Exception</span></code>çš„<code class="hljs language-scala">message</code>å’Œ<code class="hljs language-scala">cause</code>æˆå‘˜.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NotPredictedException</span>(<span class="hljs-params">message: <span class="hljs-type">String</span> = "", cause: <span class="hljs-type">Throwable</span> = null</span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Exception</span>(<span class="hljs-params">message, cause</span>)</span>

  <span class="hljs-keyword">val</span> emptyArr = <span class="hljs-type">Array</span>.empty[<span class="hljs-type">Int</span>]
  <span class="hljs-keyword">val</span> div0 = () =&gt; <span class="hljs-number">3</span> / <span class="hljs-number">0</span>
  <span class="hljs-keyword">val</span> outofBound = () =&gt; emptyArr(<span class="hljs-number">0</span>)

  <span class="hljs-keyword">val</span> justThrow = () =&gt; {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">NotPredictedException</span>(<span class="hljs-string">"ä¸€ä¸ªæ²¡æœ‰é¢„å…ˆçŸ¥é“çš„é”™è¯¯ç±»å‹"</span>)
  }
  <span class="hljs-keyword">val</span> allErrorFunctions = <span class="hljs-type">Seq</span>(div0, outofBound, justThrow)

  allErrorFunctions.foreach {
    func =&gt;
      <span class="hljs-keyword">try</span> {
        func()
      } <span class="hljs-keyword">catch</span> {
        <span class="hljs-keyword">case</span> e: <span class="hljs-type">ArithmeticException</span> =&gt; println(<span class="hljs-string">"ç®—æ•°é”™è¯¯:"</span> + e)
        <span class="hljs-keyword">case</span> e: <span class="hljs-type">ArrayIndexOutOfBoundsException</span> =&gt; println(<span class="hljs-string">"æ•°ç»„è¶Šç•Œ: "</span> + e)
        <span class="hljs-keyword">case</span> e: <span class="hljs-type">Exception</span> =&gt; println(<span class="hljs-string">"æœªçŸ¥é”™è¯¯: "</span> + e)
      }
  }
  <span class="hljs-comment">//ç®—æ•°é”™è¯¯:java.lang.ArithmeticException: / by zero</span>
  <span class="hljs-comment">//æ•°ç»„è¶Šç•Œ: java.lang.ArrayIndexOutOfBoundsException: 0</span>
  <span class="hljs-comment">//æœªçŸ¥é”™è¯¯: Playground$NotPredictedException: ä¸€ä¸ªæ²¡æœ‰é¢„å…ˆçŸ¥é“çš„é”™è¯¯ç±»å‹</span>
</code></pre>
</div></div>
<h2 id="è°ƒç”¨javaä»£ç " class="a_section" data-magellan-target="è°ƒç”¨javaä»£ç ">è°ƒç”¨Javaä»£ç <a class="a_hlink" href="#è°ƒç”¨javaä»£ç "></a></h2>
<p>åœ¨ä¸»æµå·¥ä½œç¯å¢ƒä¸­,Scalaä»£ç å’ŒJavaä»£ç åŸºæœ¬æ˜¯å…±ç”Ÿçš„.å½“ç„¶æœ‰å°‘æ•°å‹‡è€…ä¼šç”¨<a href="http://www.scala-native.org">Scala Native</a>æŠŠScalaç¼–è¯‘æˆæœºå™¨ç ,è¿˜æœ‰ä¸€äº›å‹‡è€…ä¼šç”¨<a href="https://www.scala-js.org/">Scala.js</a>æŠŠScalaç¼–è¯‘æˆJavaScript,æˆ‘ä»¬æš‚æ—¶ä¸è€ƒè™‘è¿™ç§æƒ…å†µ,åªè€ƒè™‘åœ¨JVMä¸Šå·¥ä½œçš„æƒ…å†µ.</p>
<p>Scalaè°ƒç”¨Javaä»£ç å‡ ä¹ä¸éœ€è¦ä»€ä¹ˆé¢å¤–çš„æˆæœ¬,å¦‚æœéœ€è¦ä½¿ç”¨ç°æˆçš„ç¬¬ä¸‰æ–¹JaråŒ…,åƒåœ¨Javaé¡¹ç›®é‡Œä¸€æ ·å¢åŠ ä¾èµ–å°±è¡Œäº†,è°ƒç”¨è‡ªå·±å†™çš„Javaæºç ,ä¹Ÿç›´æ¥<code class="hljs language-scala"><span class="hljs-keyword">import</span></code>å°±è¡Œ,é™¤äº†ä¸éœ€è¦åœ¨è¡Œå°¾å†™ä¸€ä¸ªåˆ†å·,å’Œåœ¨Javaé‡Œè°ƒç”¨Javaä»£ç å‡ ä¹æ²¡æœ‰åŒºåˆ«.</p>
<p>ä¹ é¢˜é›†é‡ŒåŒ…å«äº†ä¸€äº›è°ƒç”¨æ ·ä¾‹ <a href="https://github.com/fordeal-smalldata/bigdata-hands-on-quiz/blob/master/src/main/java/demo/AJavaClass.java">Javaéƒ¨åˆ†</a> <a href="https://github.com/fordeal-smalldata/bigdata-hands-on-quiz/blob/master/src/main/scala/demo/ScalaCallJava.scala">Scalaéƒ¨åˆ†</a></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯,Javaå’ŒScalaçš„åŸºæœ¬æ•°æ®ç±»å‹æ˜¯é€šç”¨çš„,ä½†æ˜¯æ ‡å‡†æ•°æ®ç»“æ„å¹¶ä¸æ˜¯,å¦‚æœè°ƒç”¨çš„Javaæ–¹æ³•å‚æ•°æˆ–è€…è¿”å›å€¼ä¸­åŒ…å«<code class="hljs language-scala"><span class="hljs-type">List</span></code>,<code class="hljs language-scala"><span class="hljs-type">Set</span></code>,<code class="hljs language-scala"><span class="hljs-type">Map</span></code>ç­‰ç±»å‹,éœ€è¦<code class="hljs language-scala"><span class="hljs-keyword">import</span> scala.collection.<span class="hljs-type">JavaConverters</span>._</code>é…åˆ<code class="hljs language-scala">asJava</code>,<code class="hljs language-scala">asScala</code>æ–¹æ³•æ¥è¿›è¡Œè½¬æ¢,å…·ä½“ä¾‹å­å¦‚ä¸‹</p>
<ul class="tabs" data-tabs id="_id0"><li class="tabs-title is-active"><a href="#_id1" aria-selected="true">Javaéƒ¨åˆ†</a></li><li class="tabs-title"><a href="#_id2">Scalaéƒ¨åˆ†</a></li></ul>
<div class="tabs-content" data-tabs-content="_id0"><div class="tabs-panel is-active" id="_id1">
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-java"><span class="hljs-keyword">package</span> demo;


<span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJavaClass</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">aJavaMethod</span><span class="hljs-params">()</span> </span>{
        System.out.println(<span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªJavaæ–¹æ³•"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title">getJavaList</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printList</span><span class="hljs-params">(List&lt;Integer&gt; list)</span> </span>{
        System.out.println(<span class="hljs-string">"æ•°ç»„ä¸­åŒ…å«å…ƒç´ :"</span>);
        list.forEach(System.out::println);
    }
}

</code></pre>
</div></div>
</div><div class="tabs-panel" id="_id2">
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">package</span> demo

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ScalaCallJava</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    <span class="hljs-keyword">val</span> jClass = <span class="hljs-keyword">new</span> <span class="hljs-type">AJavaClass</span>
    jClass.aJavaMethod()
    <span class="hljs-comment">//è¾“å‡º è¿™æ˜¯ä¸€ä¸ªJavaæ–¹æ³•</span>

    <span class="hljs-keyword">import</span> scala.collection.<span class="hljs-type">JavaConverters</span>._
    <span class="hljs-keyword">val</span> list = jClass.getJavaList.asScala
    println(<span class="hljs-string">"è½¬æ¢æˆScalaçš„æ ‡å‡†åº“: "</span> + list) <span class="hljs-comment">// è¾“å‡º è½¬æ¢æˆScalaçš„æ ‡å‡†åº“: Buffer(1, 0, 2, 4)</span>
    jClass.printList(list.asJava)
    <span class="hljs-comment">//è¾“å‡º æ•°ç»„ä¸­åŒ…å«å…ƒç´ :</span>
    <span class="hljs-comment">//1</span>
    <span class="hljs-comment">//0</span>
    <span class="hljs-comment">//2</span>
    <span class="hljs-comment">//4</span>
  }
}
</code></pre>
</div></div>
</div></div>
<h2 id="ä¸€äº›è¯­æ³•ç³–" class="a_section" data-magellan-target="ä¸€äº›è¯­æ³•ç³–">ä¸€äº›è¯­æ³•ç³–<a class="a_hlink" href="#ä¸€äº›è¯­æ³•ç³–"></a></h2>
<p>Scalaæ˜¯ä¸€é—¨è¯­æ³•ç³–å¾ˆå¤šçš„è¯­è¨€,ç”šè‡³æœ‰äººæŠŠScalaçš„è¿™ç§ç‰¹æ€§ç§°ä¸º&quot;è¯­æ³•é½&quot;.å–„ç”¨è¯­æ³•ç³–èƒ½æå‡ä»£ç è¡¨è¾¾åŠ›,ä½†æ˜¯æ»¥ç”¨è¯­æ³•ç³–ä¼šé€ æˆä»£ç å¯è¯»æ€§ä¸‹é™,æ‰€ä»¥åœ¨å·¥ä½œä¸­æœ€å¥½èŠ‚åˆ¶ä½¿ç”¨.è¿™ä¸€èŠ‚ä¸»è¦å‘å¤§å®¶ä»‹ç»åˆ«äººç”¨è¯­æ³•ç³–å†™ä»£ç çš„è¯,æˆ‘ä»¬æ€ä¹ˆè¿˜åŸå‡ºå®ƒçš„éç³–å½¢å¼(Desugar).</p>
<h3 id="ç©ºæ ¼å’Œæ‹¬å·" class="a_section" data-magellan-target="ç©ºæ ¼å’Œæ‹¬å·">ç©ºæ ¼å’Œæ‹¬å·<a class="a_hlink" href="#ç©ºæ ¼å’Œæ‹¬å·"></a></h3>
<p>Scalaç¤¾åŒºä¸‹ä¸»æµçš„ä¸€ä¸ªå•å…ƒæµ‹è¯•æ¡†æ¶æ˜¯<a href="http://www.scalatest.org/">ScalaTest</a>,æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¦–é¡µä¸Šæœ‰è¿™æ ·ä¸€ç¯‡ä»£ç æ ·ä¾‹</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">import</span> collection.mutable.<span class="hljs-type">Stack</span>
<span class="hljs-keyword">import</span> org.scalatest._

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleSpec</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlatSpec</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Matchers</span> </span>{

  <span class="hljs-string">"A Stack"</span> should <span class="hljs-string">"pop values in last-in-first-out order"</span> in {
    <span class="hljs-keyword">val</span> stack = <span class="hljs-keyword">new</span> <span class="hljs-type">Stack</span>[<span class="hljs-type">Int</span>]
    stack.push(<span class="hljs-number">1</span>)
    stack.push(<span class="hljs-number">2</span>)
    stack.pop() should be (<span class="hljs-number">2</span>)
    stack.pop() should be (<span class="hljs-number">1</span>)
  }

  it should <span class="hljs-string">"throw NoSuchElementException if an empty stack is popped"</span> in {
    <span class="hljs-keyword">val</span> emptyStack = <span class="hljs-keyword">new</span> <span class="hljs-type">Stack</span>[<span class="hljs-type">Int</span>]
    a [<span class="hljs-type">NoSuchElementException</span>] should be thrownBy {
      emptyStack.pop()
    } 
  }
}
</code></pre>
</div></div>
<p>å…¶ä¸­<code class="hljs language-scala">stack.pop() should be (<span class="hljs-number">2</span>)</code>å…¶å®ç”¨äº†ç©ºæ ¼è¯­æ³•ç³–,å»ç³–åŒ–çš„è¡¨è¾¾å½¢å¼æ˜¯<code class="hljs language-scala">stack.pop().should.be(<span class="hljs-number">2</span>)</code>,Scalaå¯¹è±¡ä¸­ç®€å•çš„å•å‚æ•°æˆ–è€…æ— å‚æ•°æ–¹æ³•éƒ½å¯ä»¥ç”¨<code class="hljs language-scala">' '</code>ä»£æ›¿<code class="hljs language-scala">'.'</code>(ä¸Šè¿°ä»£ç ä¾‹å­ä¸­,è¯­æ³•ç³–æ˜¯æå‡äº†ä»£ç è¡¨è¾¾èƒ½åŠ›çš„,è¿™ä¸ªåº”è¯¥æ²¡äººä¼šåå¯¹å§ğŸ˜„).</p>
<p>ä¹ æƒ¯åˆ«çš„ç¼–ç¨‹è¯­è¨€çš„ç©å®¶æœ‰å¯èƒ½å¿½ç•¥ä¸€ç‚¹,é‚£å°±æ˜¯å®¹æ˜“è¢«è®¤ä¸ºæ˜¯'åŸºæœ¬æ“ä½œ'çš„<code class="hljs language-scala">+ - * /</code>ç­‰,å…¶å®ä¹Ÿæ˜¯è¯­æ³•ç³–,ä¸ç®¡æ˜¯ç¬¦å·,è¿˜æ˜¯æ–‡å­—,åœ¨Scalaçš„ä¸–ç•Œé‡Œéƒ½æ˜¯å¹³ç­‰çš„.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">âœ  bigdata-hands-on git:(master) âœ— amm
<span class="hljs-type">Loading</span>...
<span class="hljs-type">Welcome</span> to the <span class="hljs-type">Ammonite</span> <span class="hljs-type">Repl</span> <span class="hljs-number">1.6</span><span class="hljs-number">.8</span>
(<span class="hljs-type">Scala</span> <span class="hljs-number">2.13</span><span class="hljs-number">.0</span> <span class="hljs-type">Java</span> <span class="hljs-number">1.8</span><span class="hljs-number">.0</span>_181)
<span class="hljs-type">If</span> you like <span class="hljs-type">Ammonite</span>, please support our development at www.patreon.com/lihaoyi
renkai-bigdata-hands-on@   <span class="hljs-keyword">val</span> shouldBe2 = <span class="hljs-number">1</span> + <span class="hljs-number">1</span>
shouldBe2: <span class="hljs-type">Int</span> = <span class="hljs-number">2</span>

renkai-bigdata-hands-on@   <span class="hljs-keyword">val</span> shouldBe2Too = <span class="hljs-number">1.</span>+(<span class="hljs-number">1</span>)
shouldBe2Too: <span class="hljs-type">Int</span> = <span class="hljs-number">2</span>
</code></pre>
</div></div>
<h3 id="ä¸‹åˆ’çº¿" class="a_section" data-magellan-target="ä¸‹åˆ’çº¿">ä¸‹åˆ’çº¿<a class="a_hlink" href="#ä¸‹åˆ’çº¿"></a></h3>
<p>ä¸‹åˆ’çº¿æ˜¯Scalaä»£ç ä¸­çš„å¸¸å®¢,å®ƒåœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å‡ºç°ä»£è¡¨ç€ä¸åŒçš„å«ä¹‰.</p>
<ul>
<li>å«ä¹‰ä¸€:æˆ‘å…¨éƒ½è¦</li>
</ul>
<p>æˆ‘å…¨éƒ½è¦çš„å«ä¹‰å‡ºç°åœ¨<code class="hljs language-scala"><span class="hljs-keyword">import</span></code>åœºæ™¯ä¸‹,Javaä¸­çš„<code class="hljs language-scala"><span class="hljs-keyword">import</span> java.time.*</code>æ“ä½œç­‰ä»·äºScalaçš„<code class="hljs language-scala"><span class="hljs-keyword">import</span> java.time._</code>åŸå› <a href="https://softwareengineering.stackexchange.com/questions/194686/why-does-scala-use-the-operator-for-package-import-instead-of-as-in-java">è¿™é‡Œ</a>æœ‰ä»‹ç»</p>
<ul>
<li>å«ä¹‰äºŒ:æˆ‘çŸ¥é“ä½ æœ‰,ä½†æˆ‘ä¸åœ¨ä¹</li>
</ul>
<p>è¿™ç§åœºæ™¯å¸¸è§äºæ¨¡å¼åŒ¹é…ä¸­,æ‚¨åœ¨è·å¾—ä¸€ä¸ª<code class="hljs language-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span></code>åå¯èƒ½åªå¯¹å…¶ä¸­çš„æŸäº›æˆå‘˜æ„Ÿå…´è¶£,å¦ä¸€äº›æˆå‘˜å½“æ—¶å°±ä¸¢å¼ƒäº†,ä½†æ˜¯ä¸ºäº†æ¨¡å¼åŒ¹é…è¦ç”¨<code class="hljs language-scala">_</code>åšå ä½ç¬¦,Scalaå®˜æ–¹ç½‘ç«™çš„<a href="https://docs.scala-lang.org/tour/pattern-matching.html">æ•™ç¨‹</a>ä¸­å°±èƒ½æ‰¾åˆ°ä¾‹å­,è´´äºæ­¤å¤„</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Notification</span></span>

<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Email</span>(<span class="hljs-params">sender: <span class="hljs-type">String</span>, title: <span class="hljs-type">String</span>, body: <span class="hljs-type">String</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Notification</span></span>

<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SMS</span>(<span class="hljs-params">caller: <span class="hljs-type">String</span>, message: <span class="hljs-type">String</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Notification</span></span>

<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VoiceRecording</span>(<span class="hljs-params">contactName: <span class="hljs-type">String</span>, link: <span class="hljs-type">String</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Notification</span></span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">showNotification</span></span>(notification: <span class="hljs-type">Notification</span>): <span class="hljs-type">String</span> = {
  notification <span class="hljs-keyword">match</span> {
    <span class="hljs-keyword">case</span> <span class="hljs-type">Email</span>(sender, title, _) =&gt; <span class="hljs-comment">// &lt;- è¿™é‡Œä¸å…³å¿ƒbody,æ‰€ä»¥ç”¨_åšäº†å ä½ç¬¦</span>
      <span class="hljs-string">s"You got an email from <span class="hljs-subst">$sender</span> with title: <span class="hljs-subst">$title</span>"</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">SMS</span>(number, message) =&gt;
      <span class="hljs-string">s"You got an SMS from <span class="hljs-subst">$number</span>! Message: <span class="hljs-subst">$message</span>"</span>
    <span class="hljs-keyword">case</span> <span class="hljs-type">VoiceRecording</span>(name, link) =&gt;
      <span class="hljs-string">s"you received a Voice Recording from <span class="hljs-subst">$name</span>! Click the link to hear it: <span class="hljs-subst">$link</span>"</span>
  }
}

<span class="hljs-keyword">val</span> someSms = <span class="hljs-type">SMS</span>(<span class="hljs-string">"12345"</span>, <span class="hljs-string">"Are you there?"</span>)
<span class="hljs-keyword">val</span> someVoiceRecording = <span class="hljs-type">VoiceRecording</span>(<span class="hljs-string">"Tom"</span>, <span class="hljs-string">"voicerecording.org/id/123"</span>)

println(showNotification(someSms))  <span class="hljs-comment">// prints You got an SMS from 12345! Message: Are you there?</span>

println(showNotification(someVoiceRecording))  <span class="hljs-comment">// you received a Voice Recording from Tom! Click the link to hear it: voicerecording.org/id/123</span>
</code></pre>
</div></div>
<ul>
<li>å«ä¹‰ä¸‰:ç»™ä¸€ä¸ªé»˜è®¤å€¼</li>
</ul>
<p>ç”¨<code class="hljs language-scala">_</code>èµ‹å€¼ç»™æŸç§ç±»å‹çš„å˜é‡,ç›¸åº”å˜é‡ä¼šè¢«èµ‹å€¼ä¸ºè¯¥ç±»å‹çš„é»˜è®¤å€¼</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">var</span> aInt: <span class="hljs-type">Int</span> = _ <span class="hljs-comment">// aInt: Int = 0</span>
<span class="hljs-keyword">var</span> aDouble: <span class="hljs-type">Double</span> = _ <span class="hljs-comment">// aDouble: Double = 0.0</span>
<span class="hljs-keyword">var</span> aString: <span class="hljs-type">String</span> = _ <span class="hljs-comment">// aString: String = null</span>
</code></pre>
</div></div>
<ul>
<li>å«ä¹‰å››:è·‘é¾™å¥—</li>
</ul>
<p>åœ¨å·¥ä½œä¸­,æˆ‘ä»¬å¯èƒ½ç»å¸¸éœ€è¦è°ƒç”¨ä¸€äº›é«˜é˜¶å‡½æ•°ç»™æ•°æ®åšç®€å•çš„å¤„ç†,ä½†æ˜¯æˆ‘ä»¬æ‡’å¾—ä¸ºé‚£äº›é«˜é˜¶å‡½æ•°èµ·å˜é‡å(èµ·å˜é‡åæ˜¯ç¼–ç¨‹ä¸­æœ€å¤§çš„å›°éš¾ğŸ˜“),è¿™ä¸ªæ—¶å€™<code class="hljs language-scala">_</code>èƒ½ä¸ºæ‚¨ç¨è®¸è§£å†³ä¸€äº›å›°æ‰°</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> strInts = <span class="hljs-type">Seq</span>(<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>, <span class="hljs-string">"3"</span>)
  <span class="hljs-comment">// strInts: Seq[String] = List("1", "2", "3")</span>
  <span class="hljs-keyword">val</span> ints1 = strInts.map(_.toInt)
  <span class="hljs-comment">// ints1: Seq[Int] = List(1, 2, 3)</span>
  <span class="hljs-keyword">val</span> ints2 = strInts.map(x =&gt; x.toInt)
  <span class="hljs-comment">//å’Œä¸Šé¢çš„å½¢å¼æ˜¯ç­‰ä»·çš„</span>
  <span class="hljs-comment">// ints2: Seq[Int] = List(1, 2, 3)</span>
</code></pre>
</div></div>
<p>ä¸¤ä¸ªä¸‹åˆ’çº¿å¯¹åº”ç®€å•çš„åŒå‚æ•°å‡½æ•°åœºæ™¯(ç”¨åˆ°çš„æœºä¼šä¸å¤š,ä½†æ˜¯çœ‹åˆ°çš„å®¹æ˜“æ‡µ)</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> oneTwoThree = <span class="hljs-type">Seq</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
	<span class="hljs-comment">//oneTwoThree: Seq[Int] = List(1, 2, 3)</span>
  <span class="hljs-keyword">val</span> sum1 = oneTwoThree.reduce(_ + _)
	<span class="hljs-comment">//sum1: Int = 6</span>
  <span class="hljs-keyword">val</span> sum2 = oneTwoThree.reduce((x, y) =&gt; x + y)
	<span class="hljs-comment">//sum2: Int = 6 å’Œä¸Šæ–¹ _ + _ ç­‰ä»·</span>
</code></pre>
</div></div>
<h3 id="for-å¾ªç¯" class="a_section" data-magellan-target="for-å¾ªç¯">for å¾ªç¯<a class="a_hlink" href="#for-å¾ªç¯"></a></h3>
<p>Scalaé‡Œä¸å…‰æ“ä½œç¬¦æ˜¯è¯­æ³•ç³–,forå¾ªç¯ä¹Ÿéƒ½æ˜¯è¯­æ³•ç³–æ¥çš„,forå¾ªç¯ä»£ç ä¼šæ ¹æ®å®é™…æƒ…å†µè¢«ç¼–è¯‘æˆ<code class="hljs language-scala">foreach</code>,<code class="hljs language-scala">map</code>å’Œ<code class="hljs language-scala">flatMap</code>,ä¸‹é¢æˆ‘ä»¬ç»™å‡ºä¸€äº›ä¾‹å­.æ›´è¯¦ç»†äº›çš„ä»‹ç»å¯ä»¥çœ‹<a href="https://docs.scala-lang.org/tutorials/FAQ/yield.html">å®˜æ–¹æ–‡æ¡£</a>.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> oneTwoThree = <span class="hljs-type">Seq</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
  <span class="hljs-keyword">for</span> (num &lt;- oneTwoThree) {
    println(num)
  }
  <span class="hljs-comment">/*è¾“å‡º
  1
  2
  3
   */</span>
  
  oneTwoThree.foreach {
    num =&gt; println(num)
  }
  <span class="hljs-comment">/*å’Œä¸Šæ–¹ä»£ç ç­‰ä»·,è¾“å‡º
  1
  2
  3
 */</span>
</code></pre>
</div></div>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> xPoints = <span class="hljs-type">Seq</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
  <span class="hljs-keyword">val</span> yPoints = <span class="hljs-type">Seq</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
  <span class="hljs-keyword">val</span> cartesianProd1 =
    <span class="hljs-keyword">for</span> (x &lt;- xPoints; y &lt;- yPoints) <span class="hljs-keyword">yield</span> (x, y)
  println(cartesianProd1)
  <span class="hljs-comment">// List((1,1), (1,2), (1,3), (2,1), (2,2), (2,3), (3,1), (3,2), (3,3))</span>
  <span class="hljs-keyword">val</span> cartesianProd2 =
    xPoints.flatMap {
      x =&gt;
        yPoints.map {
          y =&gt; (x, y)
        }
    }
  println(cartesianProd2)
  <span class="hljs-comment">//å’Œä¸Šæ–¹çš„for ... ç­‰ä»·</span>
  <span class="hljs-comment">//List((1,1), (1,2), (1,3), (2,1), (2,2), (2,3), (3,1), (3,2), (3,3))</span>
</code></pre>
</div></div>
<h2 id="è¯•è¯•æ‘†è„±break" class="a_section" data-magellan-target="è¯•è¯•æ‘†è„±break">è¯•è¯•æ‘†è„±break<a class="a_hlink" href="#è¯•è¯•æ‘†è„±break"></a></h2>
<p><code class="hljs language-scala"><span class="hljs-keyword">break</span></code>å…³é”®è¯æ˜¯å¾ˆå¤šç¼–ç¨‹è¯­è¨€å†…ç½®çš„ç‰¹æ€§,å®ƒåœ¨æµç¨‹æ§åˆ¶ä¸­å‡ ä¹æ˜¯ä¸€ä¸ªå¿…è¦çš„å…³é”®è¯,å¯ä»¥è¯´æ²¡æœ‰<code class="hljs language-scala"><span class="hljs-keyword">break</span></code>å°±æ²¡åŠæ³•å·¥ä½œâ€¦ä½†æ˜¯å½“æˆ‘ä»¬çš„è§†è§’ä»å·¥ä½œæµå˜æˆæ•°æ®çš„æ—¶å€™,<code class="hljs language-scala"><span class="hljs-keyword">break</span></code>å°±æ˜¾å¾—å¹¶æ²¡æœ‰éœ€è¦äº†,Scalaç”šè‡³æ²¡æœ‰é»˜è®¤æä¾›<code class="hljs language-scala"><span class="hljs-keyword">break</span></code>,è€Œæ˜¯æ‚¨éœ€è¦å¯¼å…¥æ‰èƒ½ä½¿ç”¨.</p>
<p>æˆ‘ä»¬æ¥è€ƒè™‘ä¸€ä¸‹è¿™æ ·ä¸€ä¸ªåœºæ™¯,æ‚¨æ˜¯ä¸€åä¼ä¸šä¸»,æ‚¨çš„äº‹ä¸šè’¸è’¸æ—¥ä¸Š,ä¸æ–­åœ°æœ‰äººæ¥æŠ•å¥”æ‚¨è¦åŠ å…¥æ‚¨çš„ä¼ä¸š.è¿™ä¸ªæ—¶å€™ä¸ºäº†æ–¹ä¾¿è®°å½•å‘˜å·¥ä¿¡æ¯,æ‚¨å°±éœ€è¦ä¸ºå‘˜å·¥éƒ½èµ‹äºˆä¸€ä¸ªå·¥å·.æ ¹æ®å†å²ç»éªŒ,ä¼ä¸šä¸»å¤šå¤šå°‘å°‘éƒ½æ˜¯è¿·ä¿¡çš„äºº,æ‚¨å¸Œæœ›å‘˜å·¥å·¥å·éƒ½å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ª6æˆ–8,å¹¶ä¸”ä¸èƒ½æœ‰4,é‚£ä¹ˆå‰100åå‘˜å·¥çš„å·¥å·ä¼šæ˜¯å¤šå°‘å‘¢?è®©æˆ‘ä»¬è¯•è¯•ç”¨å·¥ä½œæµæ§åˆ¶çš„æ–¹å¼æ¥è·å¾—è¿™äº›å·¥å·.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">import</span> scala.util.control.<span class="hljs-type">Breaks</span>._

  <span class="hljs-keyword">var</span> employeeIds = <span class="hljs-type">Vector</span>.empty[<span class="hljs-type">Int</span>]

  breakable {
    <span class="hljs-keyword">for</span> (id &lt;- <span class="hljs-number">0</span> to <span class="hljs-type">Int</span>.<span class="hljs-type">MaxValue</span>) {
      <span class="hljs-keyword">val</span> idStr = id.toString
      <span class="hljs-keyword">if</span> ((idStr.contains('<span class="hljs-number">6</span>') || idStr.contains('<span class="hljs-number">8</span>')) &amp;&amp; !idStr.contains('<span class="hljs-number">4</span>')) employeeIds :+= id
      <span class="hljs-keyword">if</span> (employeeIds.size &gt;= <span class="hljs-number">100</span>) <span class="hljs-keyword">break</span>
    }
  }
  
  println(employeeIds)
  <span class="hljs-comment">// Vector(6, 8, 16, 18, 26, 28, 36, 38, 56, 58, 60, 61 ...</span>
</code></pre>
</div></div>
<p>è¿™æ®µä»£ç å·¥ä½œè‰¯å¥½,ç»“æœæ­£ç¡®.ä¸è¿‡ä»æ•°æ®å¤„ç†çš„è§’åº¦çœ‹,å¤šäº†ä¸€äº›ä¸å¿…è¦çš„å™ªéŸ³(æˆ‘åªæ˜¯æƒ³è¦æ•°æ®å•Š,ä¸ºä»€ä¹ˆè¦å…³å¿ƒä½ çš„æ§åˆ¶æµå‘¢),æˆ‘ä»¬æ¥çœ‹çœ‹åªå…³å¿ƒæ•°æ®æµçš„æƒ…å†µä¸‹ä»£ç æ˜¯ä»€ä¹ˆæ ·çš„</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> employeeIds =
    <span class="hljs-type">Iterator</span>.iterate(<span class="hljs-number">0</span>)(_ + <span class="hljs-number">1</span>).filter {
      id =&gt;
        <span class="hljs-keyword">val</span> idStr = id.toString
        (idStr.contains('<span class="hljs-number">6</span>') || idStr.contains('<span class="hljs-number">8</span>')) &amp;&amp; !idStr.contains('<span class="hljs-number">4</span>')
    }.take(<span class="hljs-number">100</span>).toVector
  println(employeeIds)
	<span class="hljs-comment">// Vector(6, 8, 16, 18, 26, 28, 36, 38, 56, 58, 60, 61 ...</span>
</code></pre>
</div></div>
<p>æˆ‘ä»¬ç”¨<code class="hljs language-scala"><span class="hljs-type">Iterator</span>.iterate</code>ç”Ÿæˆäº†æ‰€æœ‰æ•´æ•°åˆ—è¡¨,æ³¨æ„,<code class="hljs language-scala"><span class="hljs-type">Iterator</span>.iterate</code>åªæ˜¯ä¸ºæ‚¨å®šä¹‰äº†è·å¾—æ‰€æœ‰æ•´æ•°çš„æ–¹æ³•,å¹¶æ²¡æœ‰çœŸçš„æŠŠæ‰€æœ‰æ•´æ•°éƒ½äº§ç”Ÿå‡ºæ¥æ”¾åœ¨å†…å­˜é‡Œ(å¦‚æœæ˜¯é‚£æ ·çš„è¯å†…å­˜å°±çˆ†äº†ğŸ˜¨),çœŸçš„æŠŠæ‰€æœ‰ç¬¦åˆè¦æ±‚çš„æ•°æ®å­˜ä¸‹æ¥çš„ä»£ç æ˜¯<code class="hljs language-scala">toVector</code>,å…¶ä»–æ¡ä»¶éƒ½æ˜¯ä¸ºè¿™ä¸ª<code class="hljs language-scala">toVector</code>æœåŠ¡çš„.æ‚¨ä¸éœ€è¦ç”¨ä»£ç å£°æ˜&quot;æˆ‘è¦100ä¸ª,åˆ°äº†ä¹‹åç¨‹åºå°±åœä¸‹&quot;,æ‚¨åªè¦è¯´&quot;æˆ‘è¦100ä¸ª&quot;,åœä¸‹çš„äº‹æƒ…å®ƒè‡ªå·±ä¼šåš.</p>
<h2 id="é€’å½’å’Œå°¾é€’å½’" class="a_section" data-magellan-target="é€’å½’å’Œå°¾é€’å½’">é€’å½’å’Œå°¾é€’å½’<a class="a_hlink" href="#é€’å½’å’Œå°¾é€’å½’"></a></h2>
<p>é€’å½’èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç®€æ´çš„è¡¨è¾¾å¾ˆå¤šæ¦‚å¿µ.å‡è®¾æ‚¨æ˜¯ä¸€åä¼ä¸šä¸»,æ‚¨çš„ä¼ä¸šåŒ…æ‹¬æ‚¨è‡ªå·±æœ‰100åå‘˜å·¥,æ‚¨æ²¡æœ‰ä¸Šä¸€åä¼ä¸šä¸»é‚£æ ·è¿·ä¿¡,æ‰€ä»¥æ‚¨ä¼ä¸šé‡Œçš„å‘˜å·¥IDæ˜¯0~99(0å·å°±æ˜¯æ‚¨è‡ªå·±).ç°åœ¨æ˜¥èŠ‚åˆšè¿‡å»,å‘˜å·¥éƒ½æ–—å¿—æ»¡æ»¡åœ°è¦æ¥å…¬å¸ä¸Šç­å•¦,ä¸ºäº†æ¿€åŠ±å‘˜å·¥,æ‚¨å†³å®šè®©æ¯ä¸ªå‘˜å·¥éƒ½è·å¾—ä¸å°‘äºä¸€ç™¾å…ƒçš„å¼€é—¨<a href="https://baike.baidu.com/item/%E5%88%A9%E6%98%AF/6676492">åˆ©æ˜¯</a>.å¯æ˜¯ä½œä¸ºä¸€ååˆ›ä¸šé˜¶æ®µçš„ä¼ä¸šä¸»,æ‚¨å›Šä¸­ç¾æ¶©,æ‚¨çš„é¢„ç®—æ€»å…±åªæœ‰99å…ƒ.</p>
<p>äºæ˜¯æ‚¨æƒ³äº†ä¸ªä¸»æ„,å®šäº†è¿™æ ·ä¸€ä¸ªåˆ©æ˜¯è§„åˆ™,æ—¢èƒ½æ»¡è¶³æ‚¨æœ€åˆçš„åˆå¿ƒ,åˆä¸ä¼šè¶…é¢„ç®—.æ‚¨çš„æ–¹æ¡ˆæ˜¯è¿™æ ·çš„,ä»ç¼–å·æœ€å¤§çš„å‘˜å·¥å¼€å§‹,å…ˆå‘nå…ƒåˆ©æ˜¯ç»™æ¯”è‡ªå·±å·¥å·å¤§1çš„äºº(å¦‚æœæ²¡æœ‰è¿™ä¸ªäºº,å°±å‘ç»™è€æ¿),ç„¶åå·¥å·æ¯”è‡ªå·±å°1çš„äººå‘n+1å…ƒç»™è‡ªå·±,è¿™æ ·ä¸€ç›´å¾ªç¯åˆ°å·¥å·0ä¸ºæ­¢.åˆšæ‰è¯´äº†,å¸Œæœ›å¤§å®¶éƒ½èƒ½æ‹¿åˆ°ç™¾å…ƒä»¥ä¸Šåˆ©æ˜¯,å¯æ˜¯é¢„ç®—æ€»é‡æœ‰é™,é‚£è€æ¿è‡ªå·±å§”å±ˆç‚¹,nå°±è®¾ç½®ä¸º99å§.</p>
<p>æˆ‘ä»¬å…ˆçœ‹çœ‹ç›¸åº”çš„Javaä»£ç å®ç°</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-java">    <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> maxEmployeeId = <span class="hljs-number">99</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sendRedPack</span><span class="hljs-params">(<span class="hljs-keyword">int</span> currentEmployeeId, <span class="hljs-keyword">int</span> price)</span> </span>{
        <span class="hljs-keyword">int</span> recipientId = (currentEmployeeId + <span class="hljs-number">1</span>) % maxEmployeeId;
        System.out.println(<span class="hljs-string">"å‘˜å·¥ "</span> + currentEmployeeId + <span class="hljs-string">"å‘åˆ©æ˜¯ç»™å‘˜å·¥"</span> + recipientId + <span class="hljs-string">" "</span> + price + <span class="hljs-string">" å…ƒ"</span>);
        <span class="hljs-keyword">if</span> (currentEmployeeId &gt; <span class="hljs-number">0</span>) sendRedPack(currentEmployeeId - <span class="hljs-number">1</span>, price + <span class="hljs-number">1</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        sendRedPack(<span class="hljs-number">99</span>,<span class="hljs-number">99</span>);
    }
        <span class="hljs-comment">//å‘˜å·¥ 99å‘åˆ©æ˜¯ç»™å‘˜å·¥0 99 å…ƒ</span>
        <span class="hljs-comment">//å‘˜å·¥ 98å‘åˆ©æ˜¯ç»™å‘˜å·¥99 100 å…ƒ</span>
        <span class="hljs-comment">//å‘˜å·¥ 97å‘åˆ©æ˜¯ç»™å‘˜å·¥98 101 å…ƒ</span>
        <span class="hljs-comment">//å‘˜å·¥ 96å‘åˆ©æ˜¯ç»™å‘˜å·¥97 102 å…ƒ</span>
        <span class="hljs-comment">//...</span>
        <span class="hljs-comment">//å‘˜å·¥ 3å‘åˆ©æ˜¯ç»™å‘˜å·¥4 195 å…ƒ</span>
        <span class="hljs-comment">//å‘˜å·¥ 2å‘åˆ©æ˜¯ç»™å‘˜å·¥3 196 å…ƒ</span>
        <span class="hljs-comment">//å‘˜å·¥ 1å‘åˆ©æ˜¯ç»™å‘˜å·¥2 197 å…ƒ</span>
        <span class="hljs-comment">//å‘˜å·¥ 0å‘åˆ©æ˜¯ç»™å‘˜å·¥1 198 å…ƒ</span>
</code></pre>
</div></div>
<p>å¤ªå¥½äº†,é¢„ç®—æ²¡æœ‰è¶…,å¤§å®¶éƒ½æ‹¿åˆ°äº†æ»¡æ„çš„åˆ©æ˜¯,ä¼˜ç§€çš„é€’å½’æŠ€å·§å¸®åŠ©æ‚¨æˆä¸ºäº†ä¸€åä¼˜ç§€çš„ä¼ä¸šå®¶ğŸ˜„</p>
<p>ç»è¿‡äº†å¤šå¹´çš„è‹¦å¿ƒç»è¥,æ‚¨çš„ä¼ä¸šäººæ•°å¢åŠ åˆ°äº†10000äºº,è€Œæ‚¨ä»ç„¶ä¿æŒç€æ¯å¹´æ´¾åˆ©æ˜¯æ¿€åŠ±å‘˜å·¥çš„ä¹ æƒ¯,ç°åœ¨æ‚¨å¸Œæœ›æ¯åå‘˜å·¥éƒ½æ‹¿åˆ°ä¸‡å…ƒä»¥ä¸Šåˆ©æ˜¯äº†,æ‚¨çš„é¢„ç®—ä¹Ÿå¤§å¹…æå‡åˆ°9999å…ƒ.çœŸæ˜¯ä»¤äººéš¾ä»¥ç½®ä¿¡,ä¸–ç•Œä¸Šæ€ä¹ˆä¼šæœ‰æ‚¨è¿™ä¹ˆæ…·æ…¨çš„ä¼ä¸šä¸»å‘¢.æ‚¨æ‹¿å‡ºäº†å¤šå¹´å‰é‚£ä»½ä»£ç ,ç¨ä½œä¿®æ”¹,å†³å®šè®¡ç®—æ´¾åˆ©æ˜¯çš„è§„åˆ™,ç»“æœé­é‡äº†å°å°çš„é—®é¢˜.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-java">    <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> maxEmployeeId = <span class="hljs-number">9999</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sendRedPack</span><span class="hljs-params">(<span class="hljs-keyword">int</span> currentEmployeeId, <span class="hljs-keyword">int</span> price)</span> </span>{
        <span class="hljs-keyword">int</span> recipientId = (currentEmployeeId + <span class="hljs-number">1</span>) % (maxEmployeeId + <span class="hljs-number">1</span>);
        System.out.println(<span class="hljs-string">"å‘˜å·¥ "</span> + currentEmployeeId + <span class="hljs-string">"å‘åˆ©æ˜¯ç»™å‘˜å·¥"</span> + recipientId + <span class="hljs-string">" "</span> + price + <span class="hljs-string">" å…ƒ"</span>);
        <span class="hljs-keyword">if</span> (currentEmployeeId &gt; <span class="hljs-number">0</span>) sendRedPack(currentEmployeeId - <span class="hljs-number">1</span>, price + <span class="hljs-number">1</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        sendRedPack(maxEmployeeId, maxEmployeeId);
    }
    <span class="hljs-comment">//å‘˜å·¥ 9999å‘åˆ©æ˜¯ç»™å‘˜å·¥0 9999 å…ƒ</span>
    <span class="hljs-comment">//å‘˜å·¥ 9998å‘åˆ©æ˜¯ç»™å‘˜å·¥9999 10000 å…ƒ</span>
    <span class="hljs-comment">//å‘˜å·¥ 9997å‘åˆ©æ˜¯ç»™å‘˜å·¥9998 10001 å…ƒ</span>
    <span class="hljs-comment">//å‘˜å·¥ 9996å‘åˆ©æ˜¯ç»™å‘˜å·¥9997 10002 å…ƒ</span>
    <span class="hljs-comment">//å‘˜å·¥ 9995å‘åˆ©æ˜¯ç»™å‘˜å·¥9996 10003 å…ƒ</span>
    <span class="hljs-comment">// .....</span>
    <span class="hljs-comment">//Exception in thread "main" java.lang.StackOverflowError</span>
    <span class="hljs-comment">//	at demo.AJavaClass.sendRedPack(AJavaClass.java:26)</span>
</code></pre>
</div></div>
<p>æ‚¨å±…ç„¶é­é‡äº†Stack Overflow!</p>
<p>è¿™å…¶å®ä¹Ÿä¸éš¾ç†è§£,å¦‚æœæ‚¨å­¦ä¹ è¿‡æœ¬ç§‘æ•°æ®ç»“æ„è¯¾,æ‚¨åº”è¯¥çŸ¥é“é€’å½’çš„ä¸€ä¸ªå¸¸è§„å®ç°æ˜¯åˆ©ç”¨æ ˆå­˜å‚¨ä¿¡æ¯,é€’å½’ç»“æŸåæ ˆçš„å†…å®¹ä¼šæ¸…ç©º,é€’å½’è¿‡ç¨‹ä¸­æ ˆçš„æ·±åº¦å¯èƒ½ä¼šå¾ˆæ·±,å¦‚æœè¿‡æ·±çš„è¯å°±ä¼šStack Overflow.å¦‚æœæ‚¨ä¹‹å‰æ²¡æœ‰å¥½å¥½å­¦ä¹ è¿‡è¿™å—å†…å®¹,å¯ä»¥è¯•è¯•æœç´¢å¼•æ“æŸ¥é˜…'é€’å½’åŸç†',æˆ–è€…çœ‹çœ‹<a href="https://www.bilibili.com/read/cv840653/">è¿™ç¯‡æ–‡ç« </a>.</p>
<p>éš¾é“å·²ç»æ²¡æ•‘äº†å—?ä¼˜é›…çš„é€’å½’æ¨¡å‹æ— æ³•æ»¡è¶³æ‚¨ä½œä¸ºä¸‡äººè§„æ¨¡ä¼ä¸šä¸»çš„éœ€æ±‚äº†?å®äº‹å¹¶ä¸æ˜¯è¿™æ ·çš„,è¿˜æœ‰å¾—æ•‘.</p>
<p>è¿™é‡Œè¦æåˆ°ä¸€ä¸ªæ¦‚å¿µå«åš<a href="https://zh.wikipedia.org/wiki/%E5%B0%BE%E8%B0%83%E7%94%A8">å°¾é€’å½’</a>,å…³äºä»€ä¹ˆæ˜¯å°¾é€’å½’å¯ä»¥çœ‹ <a href="https://www.zhihu.com/question/20761771">ç¾¤ä¼—è®¨è®º1</a>,<a href="https://stackoverflow.com/questions/33923/what-is-tail-recursion">ç¾¤ä¼—è®¨è®º2</a>.</p>
<p>åæ­£æˆ‘ä»¬ç°åœ¨çš„è¿™ä¸ªé€’å½’æ˜¯ç¬¦åˆå°¾é€’å½’çš„æ¦‚å¿µçš„,ä¸è¿‡é’ˆå¯¹å°¾é€’å½’çš„æƒ…å†µ,Javaç¼–è¯‘å™¨å¹¶æ²¡æœ‰ä¸ºæˆ‘ä»¬åšä¼˜åŒ–,ä¹Ÿå°±æ˜¯è¯´åœ¨Javaç¯å¢ƒä¸‹,å°¾é€’å½’å’Œæ™®é€šé€’å½’å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«.ä½†æ˜¯Scalaæ˜¯èƒ½å¯¹å°¾é€’å½’åšä¼˜åŒ–çš„,æˆ‘ä»¬æ¥çœ‹çœ‹ç›¸åº”çš„Scalaç‰ˆæœ¬.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">  <span class="hljs-keyword">val</span> maxEmployeeId = <span class="hljs-number">9999</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sendRedPack</span></span>(currentEmployeeId: <span class="hljs-type">Int</span>, price: <span class="hljs-type">Int</span>): <span class="hljs-type">Unit</span> = {
    <span class="hljs-keyword">val</span> recipientId = (currentEmployeeId + <span class="hljs-number">1</span>) % (maxEmployeeId + <span class="hljs-number">1</span>)
    println(<span class="hljs-string">s"å‘˜å·¥ <span class="hljs-subst">$currentEmployeeId</span> å‘åˆ©æ˜¯ç»™å‘˜å·¥ <span class="hljs-subst">$recipientId</span> <span class="hljs-subst">$price</span> å…ƒ"</span>)
    <span class="hljs-keyword">if</span> (currentEmployeeId &gt; <span class="hljs-number">0</span>) sendRedPack(currentEmployeeId - <span class="hljs-number">1</span>, price + <span class="hljs-number">1</span>)
  }

  sendRedPack(maxEmployeeId, maxEmployeeId)
  <span class="hljs-comment">//å‘˜å·¥ 9999 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 0 9999 å…ƒ</span>
  <span class="hljs-comment">//å‘˜å·¥ 9998 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 9999 10000 å…ƒ</span>
  <span class="hljs-comment">//å‘˜å·¥ 9997 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 9998 10001 å…ƒ</span>
  <span class="hljs-comment">//å‘˜å·¥ 9996 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 9997 10002 å…ƒ</span>
  <span class="hljs-comment">//...</span>
  <span class="hljs-comment">//å‘˜å·¥ 4 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 5 19994 å…ƒ</span>
  <span class="hljs-comment">//å‘˜å·¥ 3 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 4 19995 å…ƒ</span>
  <span class="hljs-comment">//å‘˜å·¥ 2 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 3 19996 å…ƒ</span>
  <span class="hljs-comment">//å‘˜å·¥ 1 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 2 19997 å…ƒ</span>
  <span class="hljs-comment">//å‘˜å·¥ 0 å‘åˆ©æ˜¯ç»™å‘˜å·¥ 1 19998 å…ƒ</span>
</code></pre>
</div></div>
<p>é—®é¢˜è¿åˆƒè€Œè§£äº†,æ‚¨çš„ä¼ä¸šå°±ç®—åˆ°äº†ä¸€ç™¾ä¸‡äººä¹Ÿä¸æ€•äº†!</p>
<p>å°æç¤º:</p>
<p>åœ¨IDEAä¸­,å¦‚æœæ‚¨çš„é€’å½’ç¬¦åˆå°¾é€’å½’éœ€æ±‚,æ‚¨å®šä¹‰çš„é€’å½’å‡½æ•°å·¦ä¾§ä¼šå‡ºç°ä¸€ä¸ªå¸¦ç®­å¤´çš„å°åœ†åœˆ.å¦‚æœæ‚¨çš„é€’å½’åªæ˜¯æ™®é€šé€’å½’,æ‚¨å®šä¹‰çš„å‡½æ•°å·¦ä¾§ä¼šå‡ºç°ä¸€ä¸ªèšŠé¦™å½¢çŠ¶.</p>
<p><img src="images/recursive_example.png" alt="image-20190905123058619" /></p>
<h2 id="ä¹ é¢˜" class="a_section" data-magellan-target="ä¹ é¢˜">ä¹ é¢˜<a class="a_hlink" href="#ä¹ é¢˜"></a></h2>
<ol>
<li>
<p>ç‰›é¡¿è¿­ä»£æ³•æ±‚å¹³æ–¹æ ¹,ç‰›é¡¿è¿­ä»£æ³•çš„ä»‹ç»è§<a href="https://www.matrix67.com/blog/archives/361">è¿™é‡Œ</a>,æˆ–è€…ä½ å»åˆ«çš„ä»€ä¹ˆåœ°æ–¹æ‰¾ä¹Ÿè¡Œ.</p>
<p>æŒ‰ç…§<a href="index.html#ä¹ é¢˜é›†">ææ–™å‡†å¤‡</a>é‡Œçš„æç¤ºæŠŠä¹ é¢˜ä¸‹è½½åˆ°æœ¬åœ°,ç¼–è¾‘<code class="hljs language-scala">src/main/scala/quiz/<span class="hljs-type">Quiz3</span>.scala</code>,æ›´æ”¹æ–‡ä»¶ä¸­çš„<code class="hljs language-scala">???</code>ä¸ºæ‚¨çš„ç­”æ¡ˆ.åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code class="hljs language-scala">./gradlew run --args=<span class="hljs-symbol">'quiz</span>.<span class="hljs-type">Quiz3</span>'</code>,è·å¾—ä»¥ä¸‹è¾“å‡ºè¯´æ˜ä¹ é¢˜å®Œæˆ.</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">ç‰›é¡¿è¿­ä»£æ³•æ±‚å¹³æ–¹æ ¹,ç²¾åº¦ä¸º <span class="hljs-number">1.0E-5</span>
<span class="hljs-number">1</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">1.0</span>
<span class="hljs-number">2</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">1.4142156862745097</span>
<span class="hljs-number">3</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">1.7320508100147274</span>
<span class="hljs-number">4</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">2.0000000929222947</span>
<span class="hljs-number">5</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">2.2360688956433634</span>
<span class="hljs-number">6</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">2.4494897427875517</span>
<span class="hljs-number">7</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">2.6457513111113693</span>
<span class="hljs-number">8</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">2.8284271250498643</span>
<span class="hljs-number">9</span> çš„å¹³æ–¹æ ¹æ˜¯ <span class="hljs-number">3.000000001396984</span>
</code></pre>
</div></div>
</li>
</ol>

                 
  <ul class="menu align-right simple a_navbar a_navbar_bottom">
    
      
        <li><a href="learn_scala_2.html"  title="Scalaå…¥é—¨(äºŒ)" ><span class="a_foundation_icon">ï„Š</span>  Previous</a></li>
      
    
      
        <li><span><span class="a_foundation_icon">ï„‹</span>  Next</span></li>
      
    
      
        <li><a href="site-contents.html"  title="Table of Contents" ><span class="a_foundation_icon">ï…¨</span>  Contents</a></li>
      
    
  </ul>
 
              </main>
              
              
                <div data-sticky-container class="small-12 medium-12 large-2 large-order-1 columns a_sitenav_container">
                  <nav class="a_sitenav" data-sticky data-sticky-on="large" data-anchor="_sections">
                    
                    <ul>
                       
  <li >
    
      
        <a href="index.html">Scala è¯­è¨€å…¥é—¨:ææ–™å‡†å¤‡</a>
      
    
    
  </li>
  
  <li >
    
      
        <a href="learn_scala_1.html">Scalaå…¥é—¨(ä¸€)</a>
      
    
    
  </li>
  
  <li >
    
      
        <a href="learn_scala_2.html">Scalaå…¥é—¨(äºŒ)</a>
      
    
    
  </li>
  
  <li  class="a_thispage" >
    
      
        <a href="learn_scala_3.html">Scalaå…¥é—¨(ä¸‰)</a>
      
    
    
  </li>
 
                    </ul>
                    
                    
                  </nav>
                </div>
              
              
              
                <div class="small-12 medium-12 large-2 large-order-3 columns a_show-for-xlarge" data-sticky-container>
                  <nav class="a_pagenav" data-sticky data-sticky-on="large" data-anchor="_sections">
                     <header><p>On This Page</p>
</header> 
                    <ul class="vertical menu" data-magellan>
                       
  
    <li>
      
         <a href="#scalaå…¥é—¨ä¸‰">Scalaå…¥é—¨(ä¸‰)</a> 
      
      
        <ul class="vertical menu">  
  
    <li>
      
         <a href="#case-classå’Œæ¨¡å¼åŒ¹é…">case classå’Œæ¨¡å¼åŒ¹é…</a> 
      
      
        <ul class="vertical menu">  
  
    <li>
      
         <a href="#case-class-åŒ¹é…">case class åŒ¹é…</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#å˜é•¿å‚æ•°åŒ¹é…">å˜é•¿å‚æ•°åŒ¹é…</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#æ­£åˆ™åŒ¹é…">æ­£åˆ™åŒ¹é…</a> 
      
      
    </li>
  
  </ul>
      
    </li>
  
  
  
    <li>
      
         <a href="#å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#è°ƒç”¨javaä»£ç ">è°ƒç”¨Javaä»£ç </a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#ä¸€äº›è¯­æ³•ç³–">ä¸€äº›è¯­æ³•ç³–</a> 
      
      
        <ul class="vertical menu">  
  
    <li>
      
         <a href="#ç©ºæ ¼å’Œæ‹¬å·">ç©ºæ ¼å’Œæ‹¬å·</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#ä¸‹åˆ’çº¿">ä¸‹åˆ’çº¿</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#for-å¾ªç¯">for å¾ªç¯</a> 
      
      
    </li>
  
  </ul>
      
    </li>
  
  
  
    <li>
      
         <a href="#è¯•è¯•æ‘†è„±break">è¯•è¯•æ‘†è„±break</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#é€’å½’å’Œå°¾é€’å½’">é€’å½’å’Œå°¾é€’å½’</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#ä¹ é¢˜">ä¹ é¢˜</a> 
      
      
    </li>
  
  </ul>
      
    </li>
  
 
                    </ul>
                  </nav>
                </div>
              
            </div>
          </div>
        </div>
      </div>
      
      <footer class="small-12 medium-12 large-12 columns align-self-bottom a_footer">
        <div class="row">
          <div class="small-12 medium-12 large-12 columns top-bar">
            <div class="top-bar-left">
              
            </div>
            <div class="top-bar-right">
              <p>Generated with <a href="https://github.com/szeiger/ornate">Ornate</a>.</p>

            </div>
          </div>
        </div>
      </footer>
    </div>
    
    <script src="theme/js/jquery.min.js"></script>
    <script src="theme/js/what-input.min.js"></script>
    <script src="theme/js/foundation.min.js"></script>
    
    <script src="theme/js/app.js"></script>
    
  </body>
</html>
